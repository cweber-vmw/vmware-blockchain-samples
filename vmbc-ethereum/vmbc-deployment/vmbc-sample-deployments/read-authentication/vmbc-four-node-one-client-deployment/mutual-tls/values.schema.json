{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "values-yaml-schema",
  "title": "values.yaml schema",
  "description": "values.yaml schema",
  "type": "object",
  "properties": {
    "global": {
      "description": "Global configurations",
      "type": "object",
      "properties": {
        "imageCredentials": {
          "description": "Image credentials",
          "type": "object",
          "properties": {
            "registry": {
              "description": "Container registry for image downloads",
              "type": "string",
              "minLength": 1
            },
            "username": {
              "description": "Username to access/download for registry",
              "type": "string",
              "minLength": 1
            },
            "password": {
              "description": "Password to access/download for registry",
              "type": "string",
              "minLength": 1
            }
          },
          "required": [
            "registry",
            "username",
            "password"
          ]
        },
        "storageClassName": {
          "description": "Global storage class for deployment",
          "examples": [
            "standard"
          ],
          "type": "string"
        },
        "replicaCount": {
          "description": "Global replica count for deployment",
          "examples": [
            "1"
          ],
          "type": "integer",
          "minimum": 0,
          "maximum": 1
        }
      },
      "required": [
        "imageCredentials",
        "storageClassName"
      ]
    },
    "genesisBlock": {
      "description": "Genesis Block",
      "type": "object",
      "properties": {
        "timestamp": {
          "type": "string",
          "pattern": "^\\d{4}\\-\\d{2}\\-\\d{2} \\d{2}:\\d{2}:\\d{2}",
          "$comment": "blockchain creation time in UTC, 24 hours format - YYYY-MM-DD hh:mm:ss",
          "examples": [
            "2022-12-02 00:01:00"
          ]
        }
      },
      "required": [
        "timestamp"
      ]
    },
    "replicaCheckpointBackup": {
      "description": "Replica checkpoint-based backup",
      "type": "object",
      "properties": {
        "numberOfCheckpoints":{
          "type": "integer",
          "minimum": 1,
          "maximum": 100
        }
      }
    }
  },
  "required": [
    "global",
    "storageClassNames",
    "genesisBlock"
  ],
  "if": {
    "$comment": "Check if global.storageClassName is initialized",
    "properties": {
      "global": {
        "properties": {
          "storageClassName": {
            "minLength": 1
          }
        }
      }
    }
  },
  "else": {
    "$comment": "Else all properties for storageClassNames.replica must be initialized",
    "properties": {
      "storageClassNames": {
        "properties": {
          "replica": {
            "allOf": [
              {
                "patternProperties": {
                  "^replica": {
                    "minLength": 1
                  }
                }
              }
            ]
          }
        }
      }
    }
  }
}